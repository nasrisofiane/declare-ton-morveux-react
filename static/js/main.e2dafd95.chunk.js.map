{"version":3,"sources":["services/DynosStates.js","services/AppContext.js","components/Header.js","services/AnonymousRoute.js","services/PrivateRoute.js","components/SchoolsInput.js","components/ChildrenInput.js","components/ChildUpdateForm.js","components/ChildrenList.js","views/ChildDeclaration.js","components/SignIn.js","components/SignUp.js","views/Login.js","services/Chart.js","components/Charts.js","components/Leaflet.js","components/SchoolStats.js","views/Welcome.js","App.js","reportWebVitals.js","components/Loading.js","index.js"],"names":["DynosStates","SLEEPING","UP","STARTING","AppContext","createContext","AppContextProvider","children","useState","all","Map","selectedSchool","schools","setSchools","id","username","isAuthenticated","token","user","setUser","dynosState","setDynosState","isDatasLoaded","setIsDatasLoaded","myChildren","setMyChildren","fetchIsAuthenticated","fetch","process","credentials","then","res","json","prev","useEffect","schoolsToMap","map","school","name","headers","Headers","append","method","state","catch","err","console","log","getServerCurrentStatus","me","Provider","value","fetchMyChildren","Number","isInteger","Header","appContext","useContext","userIsAuthenticated","setUserIsAuthenticated","logout","response","text","result","error","color","dark","expand","className","to","navbar","left","right","onClick","style","icon","renderLogoutButton","AnonymousRoute","rest","from","useLocation","pathname","render","location","PrivateRoute","styles","container","position","width","minWidth","maxWidth","zIndex","mdbContainer","fontSize","padding","margin","mdbListGroup","height","maxHeight","window","innerWidth","innerHeight","overflowX","overflowY","SchoolsInput","isLocal","getter","selectedOption","setSelectedOption","displayList","setDisplayList","filteredSchools","setfilteredSchools","isCursorOnList","setIsCursorOnList","handleSelectOption","e","target","attributes","handleDisplayList","show","displayElement","hiddingElement","getSchools","Array","filter","includes","customFilter","get","handleSetSchool","autoComplete","onBlur","onFocus","display","onMouseEnter","onMouseLeave","key","hover","ChildrenInput","setSelectedSchool","firstName","setFirstName","lastName","setLastName","cleanInputs","md","type","onChange","label","body","JSON","stringify","ok","ChildUpdateForm","isSick","isContagious","sick","setSick","contagious","setContagious","isUpdated","setIsUpdated","checked","htmlFor","dangerOrSuccess","fas","generateIcons","ChildrenList","child","i","currentCollapseName","currentHeadingName","data-bs-toggle","data-bs-target","aria-expanded","aria-controls","aria-labelledby","data-bs-parent","ChildDeclaration","SignIn","password","inputDatas","setInputDatas","match","useRouteMatch","validate","url","SignUp","email","isAccountRegistered","setIsAccountRegistered","generateResponseMessage","Login","path","component","exact","ChartOptions","responsive","Charts","declarations","setDeclarations","hasSelectedSchool","Object","keys","length","setState","getDeclarationsCurrentYear","currentYear","Date","isArray","declaration","date","getFullYear","getNumberOfDeclarations","chartConfig","dataSet","dataLine","labels","currentDeclaration","declarationMonth","getMonth","newState","datasets","fill","lineTension","backgroundColor","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","pointBorderColor","pointBackgroundColor","pointBorderWidth","pointHoverRadius","pointHoverBackgroundColor","pointHoverBorderColor","pointHoverBorderWidth","pointRadius","pointHitRadius","data","role","options","Leaflet","ref","useRef","current","lat","latitude","lng","longitude","setView","MapContainer","whenCreated","mapInstance","center","zoom","scrollWheelZoom","TileLayer","attribution","Marker","Popup","viewLoader","SchoolStats","nbOfSickAndContagious","setNbOfSickAndContagious","nbOfSick","setNbOfSick","Welcome","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","Loading","isLoading","loadingMessage","background","top","createLoading","dotenv","config","ReactDOM","StrictMode","basename","document","getElementById"],"mappings":"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","file":"static/js/main.e2dafd95.chunk.js","sourcesContent":["const DynosStates = {\r\n    SLEEPING : 'idle',\r\n    UP : 'up',\r\n    STARTING : 'starting'\r\n}\r\n\r\nexport default DynosStates;","import React, { createContext, useState, useEffect } from 'react';\r\nimport DynosStates from './DynosStates';\r\n\r\nconst AppContext = createContext();\r\n\r\nconst AppContextProvider = ({ children }) => {\r\n    const [schools, setSchools] = useState({\r\n        all: new Map(),\r\n        selectedSchool: {}\r\n    });\r\n\r\n    const [user, setUser] = useState({\r\n        id: null,\r\n        username: null,\r\n        isAuthenticated: false,\r\n        token: null\r\n    });\r\n\r\n    const [dynosState, setDynosState] = useState(DynosStates.SLEEPING);\r\n    const [isDatasLoaded, setIsDatasLoaded] = useState(false);\r\n\r\n    const [myChildren, setMyChildren] = useState([]);\r\n\r\n    const getServerCurrentStatus = () =>{\r\n        const headers = new Headers();\r\n        headers.append('Accept', process.env.REACT_APP_HEROKU_ACCEPT_HEADER);\r\n        headers.append('Authorization', `Bearer ${process.env.REACT_APP_HEROKU_TOKEN}`)\r\n\r\n        const res = fetch(process.env.REACT_APP_SERVER_DYNOS_URL, { \r\n            headers : headers,\r\n            method : 'GET'\r\n        })\r\n            .then(res => res.json())\r\n            .then(res => setDynosState(res[0].state))\r\n            .catch( err => console.log('Cannot retrieve Server status'));\r\n\r\n    }\r\n\r\n    const fetchIsAuthenticated = () => {\r\n\r\n        const res = fetch(`${process.env.REACT_APP_API_URL}/isAuthenticated`, {\r\n            credentials: 'include'\r\n        })\r\n            .then(res => res.json())\r\n            .then(res => setUser(prev => {\r\n                return {\r\n                    ...prev,\r\n                    isAuthenticated: res\r\n                }\r\n            })\r\n            );\r\n    }\r\n\r\n    const fetchSchools = () => {\r\n        fetch(`${process.env.REACT_APP_API_URL}/api/schools`)\r\n            .then(res => res.json())\r\n            .then(schools => {\r\n                let schoolsToMap = new Map(schools.map(school => [school.name, school]));\r\n                setSchools(prev => {\r\n                    return {\r\n                        ...prev,\r\n                        all: schoolsToMap\r\n                    }\r\n                });\r\n\r\n                setIsDatasLoaded(true);\r\n            });\r\n    }\r\n\r\n    const fetchMyChildren = () => {\r\n        if (Number.isInteger(user.id)) {\r\n            fetch(`${process.env.REACT_APP_API_URL}/api/children/parent/${user.id}`, {\r\n                credentials: 'include'\r\n            })\r\n                .then(res => res.json())\r\n                .then(children => {\r\n                    setMyChildren(children);\r\n                });\r\n        }\r\n    }\r\n\r\n    const fetchMyAccount = () => {\r\n        fetch(`${process.env.REACT_APP_API_URL}/api/parents/me`, {\r\n            credentials: 'include'\r\n        })\r\n            .then(res => res.json())\r\n            .then(me => {\r\n                setUser((prev) => {\r\n                    return {\r\n                        ...prev,\r\n                        id: me.id,\r\n                        username: me.username\r\n                    }\r\n                });\r\n            });\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchSchools();\r\n        fetchIsAuthenticated();\r\n        getServerCurrentStatus();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (user.isAuthenticated) {\r\n            fetchMyAccount();\r\n        }\r\n    }, [user.isAuthenticated]);\r\n\r\n    return (\r\n        <AppContext.Provider value={\r\n            {\r\n                schools,\r\n                setSchools,\r\n                user,\r\n                setUser,\r\n                fetchIsAuthenticated,\r\n                fetchMyChildren,\r\n                myChildren,\r\n                dynosState,\r\n                setDynosState,\r\n                isDatasLoaded\r\n            }\r\n        }>\r\n            { children}\r\n        </AppContext.Provider>\r\n    );\r\n}\r\n\r\nexport { AppContextProvider, AppContext };","import { MDBBtn, MDBCollapse, MDBIcon, MDBNavbar, MDBNavbarBrand, MDBNavbarNav, MDBNavbarToggler, MDBNavItem } from \"mdbreact\";\r\nimport React, { useContext, useEffect, useState } from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport { AppContext } from '../services/AppContext';\r\n\r\nconst Header = () => {\r\n\r\n    const appContext = useContext(AppContext);\r\n    const [userIsAuthenticated, setUserIsAuthenticated] = useState(false);\r\n\r\n    const logout = () => {\r\n\r\n        var requestOptions = {\r\n            method: 'POST',\r\n            credentials : 'include',\r\n        };\r\n\r\n        fetch(`${process.env.REACT_APP_API_URL}/logout`, requestOptions)\r\n            .then(response => response.text())\r\n            .then(result => appContext.fetchIsAuthenticated())\r\n            .catch(error => console.log('error', error));\r\n    }\r\n\r\n    const renderLogoutButton = () => {\r\n        if (userIsAuthenticated) {\r\n            return (\r\n                <MDBNavItem>\r\n                    <MDBBtn onClick={logout} className=\"m-0\"><MDBIcon style={{ color: 'white' }} icon=\"sign-out-alt\" /></MDBBtn>\r\n                </MDBNavItem>\r\n            );\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        setUserIsAuthenticated(appContext.user.isAuthenticated);\r\n    }, [appContext.user.isAuthenticated])\r\n\r\n    return (\r\n        <MDBNavbar color=\"default-color\" dark expand=\"md\">\r\n            <MDBNavbarBrand>\r\n                <Link className=\"navbar-brand\" to=\"/\">Déclare Ton Morveux</Link>\r\n            </MDBNavbarBrand>\r\n            <MDBNavbarToggler />\r\n            <MDBCollapse id=\"navbarCollapse3\" navbar>\r\n                <MDBNavbarNav left>\r\n\r\n                </MDBNavbarNav>\r\n                <MDBNavbarNav right>\r\n                    <MDBNavItem className=\"mr-3\">\r\n                        <Link className=\"nav-link\" to=\"/childDeclaration\">Déclarez un enfant</Link>\r\n                    </MDBNavItem>\r\n\r\n                    {renderLogoutButton()}\r\n                </MDBNavbarNav>\r\n            </MDBCollapse>\r\n        </MDBNavbar>\r\n\r\n    );\r\n}\r\n\r\nexport default Header;","import React, { useContext, useEffect } from 'react';\r\nimport { Redirect, Route, useLocation } from 'react-router-dom';\r\nimport { AppContext } from './AppContext';\r\n\r\nconst AnonymousRoute = ({ children, ...rest }) => {\r\n    const { user } = useContext(AppContext);\r\n    const location = useLocation();\r\n    let { from } = location.state || { from: { pathname: \"/\" } };\r\n\r\n    return (\r\n        <Route\r\n            {...rest}\r\n\r\n            render={({ location }) => {\r\n                return !user.isAuthenticated ? children : <Redirect to={{ pathname: from.pathname, state: { from: location } }} />\r\n            }\r\n            }\r\n        />\r\n    );\r\n}\r\n\r\nexport default AnonymousRoute;","import React, { useContext, useEffect } from 'react';\r\nimport { Redirect, Route, useLocation } from 'react-router-dom';\r\nimport { AppContext } from './AppContext';\r\n\r\n\r\nconst PrivateRoute = ({ children, ...rest }) => {\r\n    const { user } = useContext(AppContext);\r\n    const location = useLocation();\r\n\r\n    return (\r\n        <Route\r\n            {...rest}\r\n\r\n            render={({ location }) => {\r\n                return user.isAuthenticated ? children : <Redirect to={{ pathname: '/login', state: { from: location } }} />\r\n                \r\n            }\r\n            }\r\n        />\r\n    );\r\n}\r\n\r\nexport default PrivateRoute;","import { MDBContainer, MDBInput, MDBListGroup, MDBListGroupItem } from 'mdbreact';\r\nimport React, { useContext, useEffect, useState } from 'react';\r\nimport { AppContext } from '../services/AppContext';\r\nimport './css/SchoolsInput.css';\r\n\r\n\r\nconst getWindowDimensions = () => {\r\n    return {\r\n        width: window.innerWidth,\r\n        height: window.innerHeight\r\n    }\r\n}\r\n\r\nconst styles = {\r\n    container: {\r\n        position: 'relative',\r\n        width: '10%',\r\n        minWidth: '300px',\r\n        maxWidth: '700px',\r\n        zIndex : 1000\r\n    },\r\n\r\n    mdbContainer: {\r\n        fontSize: '13px',\r\n        padding: '0px',\r\n        margin: '0px'\r\n    },\r\n\r\n    mdbListGroup: {\r\n        width: '100%',\r\n        position: 'absolute',\r\n        height: 'auto',\r\n        maxHeight: getWindowDimensions().height / 2.9,\r\n        overflowX: 'hidden',\r\n        overflowY: 'auto'\r\n    }\r\n}\r\n\r\nconst SchoolsInput = ({ isLocal, getter }) => {\r\n    const { schools, setSchools } = useContext(AppContext);\r\n    const [selectedOption, setSelectedOption] = useState('');\r\n    const [displayList, setDisplayList] = useState('none');\r\n    const [filteredSchools, setfilteredSchools] = useState([]);\r\n    const [isCursorOnList, setIsCursorOnList] = useState(false);\r\n\r\n    const handleSchoolsInput = (e) => {\r\n        const value = e.target.value;\r\n        setSelectedOption(value);\r\n    }\r\n\r\n    const handleSelectOption = (e) => {\r\n        const value = e.target.attributes.value.value;\r\n        setSelectedOption(value);\r\n    }\r\n\r\n    const customFilter = (value) => {\r\n        if (value === selectedOption) {\r\n            return false;\r\n        }\r\n\r\n        return value.includes(selectedOption);\r\n    }\r\n\r\n    const handleSetSchool = () => {\r\n        const value = selectedOption;\r\n\r\n        if (value != '' && value && typeof value != 'undefined') {\r\n            const school = schools.all.get(value);\r\n\r\n            if (school != null) {\r\n                if(isLocal === true){\r\n                    getter(school);\r\n                } else {\r\n                    setSchools(prev => {\r\n                        return {\r\n                            ...prev,\r\n                            selectedSchool: school\r\n                        }\r\n                    })\r\n                }\r\n                \r\n            }\r\n        }\r\n    }\r\n\r\n    const handleDisplayList = (show) => {\r\n        const displayElement = 'block';\r\n        const hiddingElement = 'none';\r\n\r\n        if (show === true && displayList != displayElement) {\r\n            setDisplayList(displayElement);\r\n\r\n        } else if (show === false && displayList != hiddingElement && isCursorOnList === false) {\r\n            setDisplayList(hiddingElement);\r\n        }\r\n\r\n    }\r\n\r\n    const getSchools = () => {\r\n        const filteredSchools = Array.from(schools.all).filter(([key, value]) => customFilter(value.name));\r\n        setfilteredSchools(filteredSchools);\r\n    }\r\n\r\n    useEffect(() => {\r\n        handleSetSchool();\r\n        getSchools();\r\n    }, [selectedOption]);\r\n\r\n    useEffect(() => {\r\n        getSchools();\r\n    }, [schools.all]);\r\n\r\n    return (\r\n        <div style={styles.container}>\r\n            <MDBInput autoComplete=\"off\" id=\"school-input\" onBlur={() => handleDisplayList(false)} onFocus={() => handleDisplayList(true)} value={selectedOption} id=\"school-input\" label=\"Ecoles\" icon=\"school\" type=\"text\" list=\"schools\" onChange={handleSchoolsInput} />\r\n\r\n            <div id=\"schools\" style={{ display: displayList }}>\r\n                <MDBContainer style={styles.mdbContainer}>\r\n\r\n                    <MDBListGroup onMouseEnter={() => setIsCursorOnList(true)} onMouseLeave={() => setIsCursorOnList(false)} style={styles.mdbListGroup}>\r\n                        {\r\n                            filteredSchools\r\n                                .map(([key, value]) => <MDBListGroupItem id={key} key={key} value={value.name} onClick={handleSelectOption} hover>{value.name} </MDBListGroupItem>)\r\n\r\n                        }\r\n                    </MDBListGroup>\r\n                </MDBContainer>\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SchoolsInput;","import { MDBBtn, MDBCol, MDBContainer, MDBIcon, MDBInput, MDBRow } from 'mdbreact';\r\nimport React, { useContext, useState } from 'react';\r\nimport { AppContext } from '../services/AppContext';\r\nimport SchoolsInput from './SchoolsInput';\r\n\r\nimport './css/ChildrenInput.css';\r\n\r\nconst ChildrenInput = () => {\r\n\r\n    const [selectedSchool, setSelectedSchool] = useState(null);\r\n    const [firstName, setFirstName] = useState('');\r\n    const [lastName, setLastName] = useState('');\r\n\r\n    const { fetchMyChildren } = useContext(AppContext);\r\n\r\n\r\n    const handleSchoolInputGetter = (school) => {\r\n        setSelectedSchool(school);\r\n    }\r\n\r\n    const addChildren = () => {\r\n        const headers = new Headers();\r\n        const body = {\r\n            firstName: firstName,\r\n            lastName: lastName,\r\n            school: { id: selectedSchool.id }\r\n        }\r\n\r\n        headers.append('Content-Type', 'application/json');\r\n\r\n        if (selectedSchool != null) {\r\n            fetch(`${process.env.REACT_APP_API_URL}/api/children`, {\r\n                headers: headers,\r\n                method: 'post',\r\n                credentials: 'include',\r\n                body: JSON.stringify(body)\r\n            })\r\n                .then((response) => {\r\n                    if (response.ok) {\r\n                        fetchMyChildren();\r\n                        cleanInputs();\r\n                        return response.json();\r\n                    }\r\n                })\r\n        }\r\n\r\n    }\r\n\r\n    const handleLastNameInput = (e) => {\r\n        const value = e.target.value;\r\n        setLastName(value);\r\n    }\r\n\r\n    const handleFirstName = (e) => {\r\n        const value = e.target.value;\r\n        setFirstName(value);\r\n    }\r\n\r\n    const cleanInputs = () =>{\r\n        setFirstName('');\r\n        setLastName('');\r\n    }\r\n\r\n    return (\r\n        <MDBContainer>\r\n            <MDBRow className=\"d-flex flex-column justify-content-center align-items-center mt-4\">\r\n                <p className=\"h5 text-center mb-4\">Ajoutez un enfant</p>\r\n\r\n                <MDBCol md=\"12\">\r\n                    <form className=\"d-flex flex-row justify-content-center\">\r\n                        <div className=\"grey-text d-flex flex-row justify-content-center align-items-center\">\r\n                            <div className=\"d-flex flex-row justify-content-center\">\r\n                                <div className=\"mr-1\">\r\n                                    <MDBInput value={lastName} type=\"text\" onChange={handleLastNameInput} label=\"Nom\" icon=\"child\" />\r\n                                </div>\r\n\r\n                                <div className=\"ml-1 mr-4\">\r\n                                    <MDBInput value={firstName} type=\"text\" onChange={handleFirstName} label=\"Prénom\" />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"ml-4 mr-4\">\r\n                                <SchoolsInput isLocal={true} getter={handleSchoolInputGetter} />\r\n                            </div>\r\n                        </div>\r\n                        <div id=\"add-child-btn\" className=\"text-center d-flex justify-content-center align-items-center\">\r\n                            <MDBBtn onClick={addChildren} className=\"ml-4\"><MDBIcon icon=\"plus\" /></MDBBtn>\r\n                        </div>\r\n                    </form>\r\n                </MDBCol>\r\n            </MDBRow>\r\n        </MDBContainer>\r\n    );\r\n}\r\n\r\nexport default ChildrenInput;","import { MDBBadge, MDBBtn, MDBIcon } from 'mdbreact';\r\nimport React, { useEffect, useState } from 'react';\r\n\r\nconst ChildUpdateForm = ({ id, isSick, isContagious }) => {\r\n\r\n    const [sick, setSick] = useState(false);\r\n    const [contagious, setContagious] = useState(false);\r\n    const [isUpdated, setIsUpdated] = useState(null);\r\n\r\n    useEffect(() => {\r\n        setSick(isSick);\r\n        setContagious(isContagious);\r\n    }, []);\r\n\r\n    const handleSubmitNewChildState = () => {\r\n        const headers = new Headers();\r\n        headers.append('Content-Type', 'application/json');\r\n\r\n        const body = {\r\n            id: id,\r\n            sick: sick,\r\n            contagious: contagious\r\n        }\r\n\r\n        fetch(`${process.env.REACT_APP_API_URL}/api/children/`, {\r\n            headers: headers,\r\n            method: 'put',\r\n            credentials: 'include',\r\n            body: JSON.stringify(body)\r\n        })\r\n            .then((response) => {\r\n                if (response.ok) {\r\n                    setIsUpdated(true);\r\n                } else {\r\n                    setIsUpdated(false);\r\n                }\r\n            })\r\n    }\r\n\r\n    const handleSickChange = (e) => {\r\n        const value = e.target.checked;\r\n        setSick(value);\r\n    }\r\n\r\n    const handleContagiousChange = (e) => {\r\n        const value = e.target.checked;\r\n        setContagious(value);\r\n    }\r\n\r\n    const generateIcons = () => {\r\n        let dangerOrSuccess;\r\n        let icon;\r\n\r\n        if (isUpdated) {\r\n            dangerOrSuccess = 'success';\r\n            icon = 'check-circle';\r\n\r\n        } else {\r\n            dangerOrSuccess = 'danger';\r\n            icon = 'times-circle';\r\n        }\r\n\r\n        if (isUpdated != null) {\r\n            return (\r\n                <MDBBadge color={dangerOrSuccess}>\r\n                    <MDBIcon fas icon={icon} />\r\n                </MDBBadge>\r\n            );\r\n        }\r\n\r\n    }\r\n\r\n    return (\r\n        <div className=\"d-flex flex-row justify-content-between\">\r\n            <div className=\"custom-control custom-checkbox\">\r\n                <div>\r\n                    <input onChange={handleSickChange} id={`sick-checkbox-` + id} checked={sick} className=\"custom-control-input\" type=\"checkbox\" />\r\n                    <label className=\"custom-control-label\" htmlFor={`sick-checkbox-` + id}>Malade</label>\r\n                </div>\r\n\r\n                <div>\r\n                    <input onChange={handleContagiousChange} id={`contagious-checkbox-` + id} checked={contagious} className=\"custom-control-input\" type=\"checkbox\" />\r\n                    <label className=\"custom-control-label\" htmlFor={`contagious-checkbox-` + id}>Contagieux</label>\r\n                </div>\r\n            </div>\r\n\r\n            <div>\r\n                {generateIcons()}\r\n                <MDBBtn onClick={handleSubmitNewChildState} className=\"text-light\">Mettre à jour</MDBBtn>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ChildUpdateForm;","import 'bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { MDBContainer } from 'mdbreact';\r\nimport React, { useContext, useEffect } from 'react';\r\nimport { AppContext } from '../services/AppContext';\r\nimport ChildUpdateForm from './ChildUpdateForm';\r\n\r\n\r\nconst ChildrenList = () => {\r\n    const { fetchMyChildren, user, myChildren } = useContext(AppContext);\r\n\r\n    useEffect(() => {\r\n        fetchMyChildren();\r\n    }, [user.id]);\r\n\r\n    const createAccordion = () => {\r\n        return (\r\n            <div className=\"accordion\" id=\"accordionChildren\">\r\n                {myChildren.map((child, i) => {\r\n                    const currentCollapseName = `collapse-${i}`;\r\n                    const currentHeadingName = `heading-${i}`;\r\n\r\n                    return (\r\n                        <div key={i} className=\"accordion-item\">\r\n                            <h2 className=\"accordion-header\" id={currentHeadingName}>\r\n                                <button className=\"accordion-button collapsed\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target={'#' + currentCollapseName} aria-expanded=\"false\" aria-controls={currentCollapseName}>\r\n                                    {child.firstName + ' ' + child.lastName}\r\n                                </button>\r\n                            </h2>\r\n\r\n                            <div id={currentCollapseName} className=\"accordion-collapse collapse\" aria-labelledby={currentHeadingName} data-bs-parent=\"#accordionChildren\">\r\n                                <div className=\"accordion-body\">\r\n                                    <p>{child.school.name}</p>\r\n                                    \r\n                                    <ChildUpdateForm id={child.id} isSick={child.sick} isContagious={child.contagious} />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )\r\n                })}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <MDBContainer>\r\n            {createAccordion()}\r\n            {/* <td>{child.lastName}</td>\r\n                                    <td>{child.firstName}</td>\r\n                                    <td>{child.school.name}</td>\r\n                                    <td>{child.sick ? 'Oui' : 'Non'}</td>\r\n                                    <td>{child.contagious ? 'Oui' : 'Non'}</td>\r\n                                    <td>@mdo</td> */}\r\n        </MDBContainer>\r\n    );\r\n}\r\n\r\nexport default ChildrenList;","import React from 'react';\r\nimport ChildrenInput from '../components/ChildrenInput';\r\nimport ChildrenList from '../components/ChildrenList';\r\n\r\nconst ChildDeclaration = () => {\r\n\r\n    return (\r\n        <div>\r\n            <ChildrenInput />\r\n            <ChildrenList />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ChildDeclaration;","import { MDBBtn, MDBCol, MDBContainer, MDBInput, MDBRow } from 'mdbreact';\r\nimport React, { useContext, useState } from 'react';\r\nimport { Link, useRouteMatch } from 'react-router-dom';\r\nimport { AppContext } from '../services/AppContext';\r\n\r\nconst SignIn = () => {\r\n    const appContext = useContext(AppContext);\r\n\r\n    const [inputDatas, setInputDatas] = useState({\r\n        username: '',\r\n        password: ''\r\n    });\r\n\r\n    const match = useRouteMatch();\r\n\r\n    const authenticateUser = () => {\r\n        const headers = new Headers();\r\n        headers.append('Content-Type', 'application/json');\r\n\r\n        if (inputDatas.username != null && inputDatas.password != null) {\r\n            fetch(`${process.env.REACT_APP_API_URL}/authenticate`, {\r\n                headers: headers,\r\n                method: 'post',\r\n                credentials: 'include',\r\n                body: JSON.stringify(inputDatas)\r\n            })\r\n                .then((response) => {\r\n                    if (response.ok) {\r\n                        return response.json();\r\n                    }\r\n                })\r\n                .then(token => {\r\n                    if (token) {\r\n                        appContext.setUser({\r\n                            isAuthenticated: true,\r\n                            ...token\r\n                        });\r\n                    }\r\n                });\r\n        }\r\n\r\n    }\r\n\r\n    const handleUsernameInputChange = (e) => {\r\n        const username = e.target.value;\r\n\r\n        setInputDatas(prev => {\r\n            return {\r\n                ...prev,\r\n                username: username\r\n            }\r\n        })\r\n    }\r\n\r\n    const handlePasswordInputChange = (e) => {\r\n        const password = e.target.value;\r\n\r\n        setInputDatas(prev => {\r\n            return {\r\n                ...prev,\r\n                password: password\r\n            }\r\n        })\r\n    }\r\n\r\n    return (\r\n        <MDBContainer>\r\n            <MDBRow className=\"d-flex justify-content-center align-items-center mt-4\">\r\n                <MDBCol md=\"6\">\r\n                    <form>\r\n                        <p className=\"h5 text-center mb-4\">Sign in</p>\r\n                        <div className=\"grey-text\">\r\n                            <MDBInput type=\"text\" onChange={handleUsernameInputChange} value={inputDatas.username} label=\"Nom d'utilisateur\" icon=\"user\" />\r\n                            <MDBInput onChange={handlePasswordInputChange} value={inputDatas.password} type=\"password\" label=\"Mot de passe\" icon=\"lock\" validate />\r\n                        </div>\r\n                        <div className=\"text-center\">\r\n                            <MDBBtn style={{ color : 'white'}} onClick={authenticateUser}>Se connecter</MDBBtn>\r\n                        </div>\r\n                    </form>\r\n                    \r\n                    <p className=\"mt-3\">Vous n'avez pas de compte ? <Link style={{display : 'inline'}} to={`${match.url}/signup`}>Enregistrez vous</Link></p>\r\n                </MDBCol>\r\n            </MDBRow>\r\n        </MDBContainer>\r\n    );\r\n}\r\n\r\nexport default SignIn;","import React, { useState, useEffect } from 'react';\r\nimport { MDBContainer, MDBRow, MDBCol, MDBInput, MDBBtn, MDBAlert } from 'mdbreact';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst SignUp = () => {\r\n    const [inputDatas, setInputDatas] = useState({\r\n        username: '',\r\n        password: '',\r\n        email: ''\r\n    });\r\n\r\n    const [isAccountRegistered, setIsAccountRegistered] = useState(null);\r\n\r\n    const registerUser = () => {\r\n        const headers = new Headers();\r\n        headers.append('Content-Type', 'application/json');\r\n\r\n        if (inputDatas.username != null && inputDatas.password != null) {\r\n            fetch(`${process.env.REACT_APP_API_URL}/register`, {\r\n                headers: headers,\r\n                method: 'post',\r\n                body: JSON.stringify(inputDatas)\r\n            })\r\n                .then((response) => {\r\n                    if (response.ok) {\r\n                        setIsAccountRegistered(true);\r\n                    } else {\r\n                        setIsAccountRegistered(false);\r\n                    }\r\n                })\r\n        }\r\n\r\n    }\r\n\r\n    const cleanUpInputs = () => {\r\n        setInputDatas(prev => {\r\n\r\n            return {\r\n                ...prev,\r\n                username: '',\r\n                password: '',\r\n                email: ''\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    const handleUsernameInputChange = (e) => {\r\n        const username = e.target.value;\r\n\r\n        setInputDatas(prev => {\r\n            return {\r\n                ...prev,\r\n                username: username\r\n            }\r\n        })\r\n    }\r\n\r\n    const handlePasswordInputChange = (e) => {\r\n        const password = e.target.value;\r\n\r\n        setInputDatas(prev => {\r\n            return {\r\n                ...prev,\r\n                password: password\r\n            }\r\n        })\r\n    }\r\n\r\n    const handleEmailInputChange = (e) => {\r\n        const email = e.target.value;\r\n\r\n        setInputDatas(prev => {\r\n            return {\r\n                ...prev,\r\n                email: email\r\n            }\r\n        })\r\n    }\r\n\r\n    const generateResponseMessage = () => {\r\n\r\n        if (isAccountRegistered == null) {\r\n            return;\r\n        } else if (isAccountRegistered) {\r\n            return (\r\n                <MDBAlert color=\"success\" >\r\n                    Le compte a bien été enregistrer\r\n                </MDBAlert>\r\n            )\r\n        } else if (!isAccountRegistered) {\r\n            return (\r\n                <MDBAlert color=\"danger\" >\r\n                    Impossible d'enregistrer le compte\r\n                </MDBAlert>\r\n            )\r\n        }\r\n    }\r\n\r\n    useEffect(() =>{\r\n        if(isAccountRegistered){\r\n            cleanUpInputs();\r\n        }\r\n    }, [isAccountRegistered]);\r\n\r\n    return (\r\n        <MDBContainer>\r\n            <MDBRow className=\"d-flex justify-content-center align-items-center mt-4\">\r\n                <MDBCol md=\"6\">\r\n                    <form>\r\n                        {generateResponseMessage()}\r\n                        <p className=\"h5 text-center mb-4\">Sign up</p>\r\n                        <div className=\"grey-text\">\r\n                            <MDBInput value={inputDatas.username} type=\"text\" label=\"Nom d'utilisateur\" icon=\"user\" onChange={handleUsernameInputChange} />\r\n                            <MDBInput value={inputDatas.email} type=\"email\" label=\"Email\" icon=\"envelope\" onChange={handleEmailInputChange} />\r\n                            <MDBInput value={inputDatas.password} type=\"password\" label=\"Mot de passe\" icon=\"lock\" validate onChange={handlePasswordInputChange} />\r\n                        </div>\r\n                        <div className=\"text-center\">\r\n                            <MDBBtn style={{ color : 'white'}} onClick={registerUser}>S'enregistrer</MDBBtn>\r\n                        </div>\r\n\r\n\r\n                    </form>\r\n\r\n                    <p className=\"mt-3\">Vous avez déjà un compte ? <Link style={{ display: 'inline' }} to={`/login`}>Connectez vous</Link></p>\r\n                </MDBCol>\r\n            </MDBRow>\r\n        </MDBContainer>\r\n    );\r\n}\r\n\r\nexport default SignUp;","import React from 'react';\r\nimport SignIn from '../components/SignIn';\r\nimport SignUp from '../components/SignUp';\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route,\r\n    useRouteMatch\r\n} from \"react-router-dom\";\r\n\r\nconst Login = () => {\r\n    const match = useRouteMatch();\r\n\r\n    return (\r\n        <div className=\"flex-grow-1 d-flex justify-content-center align-items-center\">\r\n            <Switch>\r\n                <Route path={`${match.path}/signup`} component={SignUp} />\r\n\r\n                <Route exact path={`${match.path}/`} component={SignIn} />\r\n            </Switch>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;","\r\nconst ChartConfig = () => {\r\n    return {\r\n        dataLine: {\r\n            labels: [\"Janvier\", \"Février\", \"Mars\", \"Avril\", \"Mai\", \"Juin\", \"Juillet\", \"Aout\", \"Septembre\", \"Octobre\", \"Novembre\", \"Décembre\"],\r\n\r\n            datasets: [\r\n                {\r\n                    label: \"Malades non contagieux\",\r\n                    fill: true,\r\n                    lineTension: 0.3,\r\n                    backgroundColor: \"rgba(225, 204,230, .3)\",\r\n                    borderColor: \"rgb(205, 130, 158)\",\r\n                    borderCapStyle: \"butt\",\r\n                    borderDash: [],\r\n                    borderDashOffset: 0.0,\r\n                    borderJoinStyle: \"miter\",\r\n                    pointBorderColor: \"rgb(205, 130,1 58)\",\r\n                    pointBackgroundColor: \"rgb(255, 255, 255)\",\r\n                    pointBorderWidth: 10,\r\n                    pointHoverRadius: 5,\r\n                    pointHoverBackgroundColor: \"rgb(0, 0, 0)\",\r\n                    pointHoverBorderColor: \"rgba(220, 220, 220,1)\",\r\n                    pointHoverBorderWidth: 2,\r\n                    pointRadius: 1,\r\n                    pointHitRadius: 10,\r\n                    data: null\r\n                },\r\n                {\r\n                    label: \"Malades contagieux\",\r\n                    fill: true,\r\n                    lineTension: 0.3,\r\n                    backgroundColor: \"rgba(184, 185, 210, .3)\",\r\n                    borderColor: \"rgb(35, 26, 136)\",\r\n                    borderCapStyle: \"butt\",\r\n                    borderDash: [],\r\n                    borderDashOffset: 0.0,\r\n                    borderJoinStyle: \"miter\",\r\n                    pointBorderColor: \"rgb(35, 26, 136)\",\r\n                    pointBackgroundColor: \"rgb(255, 255, 255)\",\r\n                    pointBorderWidth: 10,\r\n                    pointHoverRadius: 5,\r\n                    pointHoverBackgroundColor: \"rgb(0, 0, 0)\",\r\n                    pointHoverBorderColor: \"rgba(220, 220, 220, 1)\",\r\n                    pointHoverBorderWidth: 2,\r\n                    pointRadius: 1,\r\n                    pointHitRadius: 10,\r\n                    data: null\r\n                }\r\n            ]\r\n        }\r\n    }\r\n}\r\n\r\nconst ChartOptions = () => {\r\n    return {\r\n        responsive: true,\r\n    }\r\n}\r\n\r\nexport { ChartOptions, ChartConfig };","import { MDBContainer } from 'mdbreact';\r\nimport React, { useState, useContext, useEffect } from 'react';\r\nimport { Line } from \"react-chartjs-2\";\r\nimport { ChartOptions, ChartConfig } from '../services/Chart';\r\nimport { AppContext } from '../services/AppContext';\r\n\r\nconst Charts = () => {\r\n\r\n    const { schools } = useContext(AppContext);\r\n    const [declarations, setDeclarations] = useState(null);\r\n\r\n    const fetchDeclarationsDate = () => {\r\n        fetch(`${process.env.REACT_APP_API_URL}/api/declarations/${schools.selectedSchool.id}`)\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    return res.json();\r\n                }\r\n            })\r\n            .then(declarations => setDeclarations(getDeclarationsCurrentYear(declarations)));\r\n    }\r\n\r\n    const hasSelectedSchool = () => {\r\n        return Object.keys(schools.selectedSchool).length > 0;\r\n    }\r\n\r\n    const [state, setState] = useState(null);\r\n\r\n    const getDeclarationsCurrentYear = (declarations) => {\r\n        const currentYear = new Date();\r\n\r\n        if (Array.isArray(declarations)) {\r\n            const currentYearDeclarations = declarations\r\n                .map(declaration => {\r\n                    return { ...declaration, date: new Date(declaration.date) }\r\n                })\r\n                .filter(declaration => currentYear.getFullYear() === declaration.date.getFullYear());\r\n\r\n            return currentYearDeclarations;\r\n        }\r\n\r\n        return [];\r\n    }\r\n\r\n    const getNumberOfDeclarations = (contagious, chartConfig) => {\r\n        let dataSet = chartConfig.dataLine.labels.map(() => 0);\r\n\r\n        if (Array.isArray(declarations)) {\r\n            for (let i = 0; i < declarations.length; i++) {\r\n                const currentDeclaration = declarations[i];\r\n\r\n                if (currentDeclaration.contagious === contagious) {\r\n                    const declarationMonth = currentDeclaration.date.getMonth();\r\n\r\n                    dataSet[declarationMonth] = dataSet[declarationMonth] + 1;\r\n\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        return dataSet;\r\n    }\r\n\r\n    const viewLoader = () => {\r\n\r\n        if (hasSelectedSchool() && state != null) {\r\n            if (declarations === null) {\r\n                return (\r\n                    <MDBContainer className=\"mt-4\">\r\n                        <div role=\"status\" className=\"spinner-border text-primary text-center\">\r\n                            <span className=\"sr-only\">Loading...</span>\r\n                        </div>\r\n                    </MDBContainer>\r\n                );\r\n            } else {\r\n                return (\r\n                    <MDBContainer>\r\n                        <h3 className=\"mt-5\">Graphique de l'année actuelle</h3>\r\n                        <Line data={state.dataLine} options={ChartOptions} />\r\n                    </MDBContainer>\r\n                )\r\n            }\r\n\r\n        } else {\r\n\r\n            return (\r\n                <div>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (hasSelectedSchool()) {\r\n            fetchDeclarationsDate();\r\n        }\r\n    }, [schools.selectedSchool]);\r\n\r\n    useEffect(() => {\r\n        let newState = ChartConfig();\r\n        newState.dataLine.datasets[0].data = getNumberOfDeclarations(false, newState);\r\n        newState.dataLine.datasets[1].data = getNumberOfDeclarations(true, newState);\r\n\r\n        setState(newState);\r\n\r\n    }, [declarations]);\r\n\r\n    return viewLoader();\r\n}\r\n\r\nexport default Charts;","import { MDBContainer } from 'mdbreact';\r\nimport React, { useContext, useEffect, useRef } from 'react';\r\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\r\nimport { AppContext } from '../services/AppContext';\r\n\r\nconst Leaflet = () => {\r\n    const { schools } = useContext(AppContext);\r\n    const ref = useRef();\r\n\r\n    useEffect(() => {\r\n\r\n        if (schools.selectedSchool.id != null && ref.current != null) {\r\n            const lat = schools.selectedSchool.latitude;\r\n            const lng = schools.selectedSchool.longitude;\r\n\r\n            ref.current.setView([lng, lat], 20);\r\n        }\r\n\r\n    }, [schools.selectedSchool])\r\n\r\n    const viewLoader = () => {\r\n\r\n        if (schools.selectedSchool.id != null) {\r\n            const lat = schools.selectedSchool.latitude;\r\n            const lng = schools.selectedSchool.longitude;\r\n\r\n            return (\r\n                <MDBContainer>\r\n                    <MapContainer whenCreated={mapInstance => { ref.current = mapInstance }} center={[lng, lat]} zoom={13} scrollWheelZoom={false} style={{ height: '180px' }}>\r\n                        <TileLayer\r\n                            attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n                            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n                        />\r\n                        <Marker position={[lng, lat]}>\r\n                            <Popup>\r\n                                {schools.selectedSchool.name}\r\n                            </Popup>\r\n                        </Marker>\r\n                    </MapContainer>\r\n                </MDBContainer>\r\n\r\n            );\r\n        } else {\r\n            return <div></div>\r\n        }\r\n\r\n    }\r\n\r\n    return viewLoader();\r\n}\r\n\r\nexport default Leaflet;","import { MDBAlert, MDBContainer } from 'mdbreact';\r\nimport React, { useState, useEffect, useContext } from 'react';\r\nimport { AppContext } from '../services/AppContext';\r\n\r\nconst SchoolStats = () => {\r\n\r\n    const { schools } = useContext(AppContext);\r\n    const [nbOfSickAndContagious, setNbOfSickAndContagious] = useState(0);\r\n    const [nbOfSick, setNbOfSick] = useState(0);\r\n\r\n    const fetchSickAndContagious = () => {\r\n        fetch(`https://declare-ton-morveux.herokuapp.com/api/children/countIsSickAndIsContagiousBySchool/${schools.selectedSchool.id}`)\r\n            .then(res => res.json())\r\n            .then(res => setNbOfSickAndContagious(res));\r\n    }\r\n\r\n    const fetchSick = () => {\r\n        fetch(`https://declare-ton-morveux.herokuapp.com/api/children/countIsSickBySchool/${schools.selectedSchool.id}`)\r\n            .then(res => res.json())\r\n            .then(res => setNbOfSick(res));\r\n    }\r\n\r\n    const hasSelectedSchool = () => {\r\n        return Object.keys(schools.selectedSchool).length > 0;\r\n    }\r\n\r\n    const viewLoader = () => {\r\n\r\n        if (hasSelectedSchool()) {\r\n            return (\r\n                <MDBContainer>\r\n                    <MDBAlert color=\"warning\">\r\n                        <h4 className=\"alert-heading\">Informations</h4>\r\n                        <p>Il y a eu {nbOfSick} malades dont {nbOfSickAndContagious} contagieux toutes périodes confondues</p>\r\n                    </MDBAlert>\r\n                </MDBContainer>\r\n            )\r\n        } else {\r\n\r\n            return (\r\n                <div>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (hasSelectedSchool()) {\r\n            fetchSickAndContagious();\r\n            fetchSick();\r\n        }\r\n    }, [schools.selectedSchool]);\r\n\r\n    return viewLoader();\r\n}\r\n\r\nexport default SchoolStats;","import React from 'react';\r\nimport Charts from '../components/Charts';\r\nimport Leaflet from '../components/Leaflet';\r\nimport SchoolsInput from '../components/SchoolsInput';\r\nimport SchoolStats from '../components/SchoolStats';\r\n\r\nconst Welcome = () => {\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"mt-4 d-flex justify-content-center\">\r\n                <SchoolsInput />\r\n            </div>\r\n            <SchoolStats />\r\n            <Leaflet/>\r\n            <Charts/>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Welcome;","import React from 'react';\nimport { Route, Switch } from \"react-router-dom\";\nimport './App.css';\nimport Header from './components/Header';\nimport AnonymousRoute from './services/AnonymousRoute';\nimport PrivateRoute from './services/PrivateRoute';\nimport ChildDeclaration from './views/ChildDeclaration';\nimport Login from './views/Login';\nimport Welcome from './views/Welcome';\n\nfunction App() {\n\n  return (\n    <div className=\"App h-100 d-flex flex-column\">\n      <header>\n        <Header />\n      </header>\n\n      <Switch>\n        <Route exact path=\"/\" component={Welcome} />\n\n        <AnonymousRoute path=\"/login\">\n          <Login/>\n        </AnonymousRoute>\n\n        <PrivateRoute path=\"/childDeclaration\">\n          <ChildDeclaration />\n        </PrivateRoute>\n      </Switch>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { MDBContainer, MDBRow } from 'mdbreact';\r\nimport React, { useContext } from 'react';\r\nimport { AppContext } from '../services/AppContext';\r\nimport DynosStates from '../services/DynosStates';\r\n\r\nconst Loading = () => {\r\n    const { dynosState, isDatasLoaded } = useContext(AppContext);\r\n\r\n    const getWindowHeight = () => {\r\n        return window.innerHeight;\r\n    }\r\n\r\n    const createLoading = () => {\r\n        let isLoading = true;\r\n        let loadingMessage = '';\r\n\r\n        if ((dynosState === DynosStates.SLEEPING || dynosState === DynosStates.STARTING) && isDatasLoaded === false) {\r\n            isLoading = true;\r\n            loadingMessage = 'Le serveur Heroku est entrain de se reveiller ...';\r\n        } else if (isDatasLoaded === false) {\r\n            isLoading = true;\r\n            loadingMessage = 'Chargement des données ...';\r\n        } else {\r\n            isLoading = false;\r\n        }\r\n\r\n        if (isLoading) {\r\n            return (\r\n                <MDBRow id=\"loading-container\" style={{ height: getWindowHeight() + 'px', background : '#dbdbdbd9', zIndex : '1001', top : '0px'}} className=\"d-flex justify-content-center align-items-center position-absolute w-100 p-0 m-0 text-center\">\r\n\r\n                    <div>\r\n                        <p>{loadingMessage}</p>\r\n                        <div className=\"spinner-border\" style={{ color : '#2bbbad'}} role=\"status\">\r\n                            <span className=\"visually-hidden\">Loading...</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                </MDBRow>\r\n            )\r\n        } else {\r\n            return <></>\r\n        }\r\n    }\r\n\r\n    return createLoading();\r\n}\r\n\r\nexport default Loading;","import '@fortawesome/fontawesome-free/css/all.min.css';\nimport 'bootstrap-css-only/css/bootstrap.min.css';\nimport 'mdbreact/dist/css/mdb.css';\n\nimport dotenv from 'dotenv';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { AppContextProvider } from './services/AppContext';\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport Loading from './components/Loading';\n\ndotenv.config();\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router basename=\"/declare-ton-morveux-react\">\n      <AppContextProvider>\n        <App />\n        <Loading/>\n      </AppContextProvider>\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n\n"],"sourceRoot":""}